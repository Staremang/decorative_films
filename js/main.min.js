"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function removeSelect(){document.querySelector(".film-list-select").removeChild(this.parentElement)}function addSelect(){document.querySelectorAll(".form-popup__select-add").forEach(function(t,e){t.removeEventListener("click",addSelect),t.classList.remove("form-popup__select-add"),t.classList.add("form-popup__select-remove"),t.innerHTML="–",t.title="Удалить наименование",t.addEventListener("click",removeSelect)});var n="";type.forEach(function(t,e){n+='<optgroup label="'+t.id+'">',t.sub.forEach(function(t,e){n+="<option value=”"+t.id+"”>"+t.name+"</option>"}),n+="</optgroup>"});var t=document.createElement("div"),e=document.createElement("select"),i=document.createElement("input"),o=document.createElement("button");t.className="form-popup__select-item",e.name="",e.className="form-popup__select",e.innerHTML=n,i.className="input form-popup__select-input",i.name="",i.type="number",i.placeholder="Размер, м",o.type="button",o.className="btn form-popup__select-add",o.innerHTML="+",o.title="Добавить наименование",o.addEventListener("click",addSelect),t.appendChild(e),t.appendChild(i),t.appendChild(o),document.querySelector(".film-list-select").appendChild(t)}var _createClass=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a){window.anchor={settings:{transitionDuration:2e3,transitionTimingFunction:"swing",labels:{error:"Couldn't find any section"}},init:function(t){return a(this).data("settings",a.extend(anchor.settings,t)),this.each(function(){var e=a(this);e.unbind("click").click(function(t){t.preventDefault(),anchor.jumpTo(anchor.getTopOffsetPosition(e),e.data("settings"))})})},getTopOffsetPosition:function(t){var e=t.attr("href"),n=a(a(e).get(0)),i=a(document).height(),o=a(window).height();if(!n||n.length<1)throw new ReferenceError(anchor.settings.labels.error);return n.offset().top+o>i?i-o:n.offset().top},jumpTo:function(t,e){var n=a("html, body");n.animate({scrollTop:t-50},e.transitionDuration,e.transitionTimingFunction),n.bind("scroll mousedown DOMMouseScroll mousewheel keyup",function(t){(0<t.which||"mousedown"===t.type||"mousewheel"===t.type)&&n.stop().unbind("scroll mousedown DOMMouseScroll mousewheel keyup")})}},a.fn.anchor=function(t){return anchor[t]?anchor[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==(void 0===t?"undefined":_typeof(t))&&t?a.error("Method "+t+" does not exist on jQuery.anchor"):anchor.init.apply(this,arguments)}}(jQuery);var Popup=function(){function t(){_classCallCheck(this,t),this.$block=$(".popup__wrapper"),this.generated=!1}return _createClass(t,[{key:"open",value:function(t){this.generated||this.generate(),this.switch(t)}},{key:"switch",value:function(n){var i,o;$(".films-menu__title").removeClass("active"),$(".films-menu__subtitle").removeClass("active"),$(".films-preview__color").removeClass("active"),$(".films-preview__colors-list").removeClass("active"),$('.films-menu__subtitle[data-src="'+n+'"]').addClass("active").parents(".films-menu__title").addClass("active"),$('.films-preview__color[data-src="'+n+'"]').addClass("active").parent().addClass("active"),type.some(function(t,e){return(i=t).sub.some(function(t,e){return n===(o=t).id})}),$(".films-description__title").text(i.name),$(".films-description__subtitle").text(o.name),$(".films-gallery").empty(),o.galleryPrev&&o.galleryPrev.forEach(function(t){$(".films-gallery").append('<a class="films-gallery__item" data-fancybox="gallery" href="'+t[0]+'"><img src="'+t[1]+'"></a>')})}},{key:"generate",value:function(){var n="",i="",t=this;type.forEach(function(t,e){n+='<li class="films-menu__title">\n',n+='<span class="films-menu__title-link">'+t.name+"</span>",n+='<ul class="films-menu__subtitle-block">',i+='<div class="films-preview__colors-list">',t.sub.forEach(function(t,e){n+='<li class="films-menu__subtitle" data-popup-in data-src="'+t.id+'">'+t.name+"</li>",i+='<div class="films-preview__color" data-popup-in data-src="'+t.id+'"><img src="'+t.prevUrl+'" alt="'+t.name+'"></div>'}),n+="</ul>",n+="</li>",i+="</div>"}),n+='<li>\t\t\t\t\t<button type="button" data-fancybox data-src="#payment_and_shiping" class="btn films-menu__btn">Оплата и доставка</button>\t\t\t\t</li>',t.$block.find(".films-menu").html(n),t.$block.find(".films-preview__colors-container").html(i),$(".films-menu__title-link").click(function(){$(".films-menu__title").removeClass("active"),$(this).parent().addClass("active")}),$("[data-popup-in]").click(function(){t.switch($(this).data("src"))}),t.generated=!0}}]),t}();$.fn.tooltip=function(){var t="";$(this).each(function(){""!=$(this).data("tooltip")&&(t='<div class="tooltip">\t\t\t\t\t<div class="tooltip__icon"></div>\t\t\t\t\t<div class="tooltip__content">'+$(this).data("tooltip")+"</div>\t\t\t\t</div>",$(this).prepend(t))})},$(document).ready(function(){$("[data-fancybox]").fancybox({transitionEffect:"slide"}),$(".section__list-item").click(function(){var t=$(this).parents(".section");t.find(".section__bg").removeClass("active"),t.find(".section__bg").eq($(this).data("bg")).addClass("active")});var t=new Popup;$("[data-film-id]").click(function(){t.open($(this).data("film-id"))}),$("[data-tooltip]").tooltip(),addSelect()});