"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(s){window.anchor={settings:{transitionDuration:2e3,transitionTimingFunction:"swing",labels:{error:"Couldn't find any section"}},init:function(t){return s(this).data("settings",s.extend(anchor.settings,t)),this.each(function(){var e=s(this);e.unbind("click").click(function(t){t.preventDefault(),anchor.jumpTo(anchor.getTopOffsetPosition(e),e.data("settings"))})})},getTopOffsetPosition:function(t){var e=t.attr("href"),n=s(s(e).get(0)),i=s(document).height(),o=s(window).height();if(!n||n.length<1)throw new ReferenceError(anchor.settings.labels.error);return n.offset().top+o>i?i-o:n.offset().top},jumpTo:function(t,e){var n=s("html, body");n.animate({scrollTop:t-50},e.transitionDuration,e.transitionTimingFunction),n.bind("scroll mousedown DOMMouseScroll mousewheel keyup",function(t){(0<t.which||"mousedown"===t.type||"mousewheel"===t.type)&&n.stop().unbind("scroll mousedown DOMMouseScroll mousewheel keyup")})}},s.fn.anchor=function(t){return anchor[t]?anchor[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==(void 0===t?"undefined":_typeof(t))&&t?s.error("Method "+t+" does not exist on jQuery.anchor"):anchor.init.apply(this,arguments)}}(jQuery);var Popup=function(){function t(){_classCallCheck(this,t),this.$block=$(".popup"),this.generated=!1}return _createClass(t,[{key:"open",value:function(t){this.generated||this.generate(),this.switch(t),document.body.classList.add("fancybox-active"),this.$block.fadeIn()}},{key:"close",value:function(){this.$block.fadeOut(),document.body.classList.remove("fancybox-active")}},{key:"switch",value:function(t){$(".films-menu__title").removeClass("active"),$(".films-menu__subtitle").removeClass("active"),$(".films-preview__color").removeClass("active"),$(".films-preview__colors-list").removeClass("active"),$('.films-menu__subtitle[data-src="'+t+'"]').addClass("active").parents(".films-menu__title").addClass("active"),$('.films-preview__color[data-src="'+t+'"]').addClass("active").parent().addClass("active")}},{key:"generate",value:function(){var n="",i="",t=this;type.forEach(function(t,e){n+='<li class="films-menu__title">\n',n+='<span class="films-menu__title-link">'+t.name+"</span>",n+='<ul class="films-menu__subtitle-block">',i+='<div class="films-preview__colors-list">',t.sub.forEach(function(t,e){n+='<li class="films-menu__subtitle" data-popup-in data-src="'+t.id+'">'+t.name+"</li>",i+='<div class="films-preview__color" data-popup-in data-src="'+t.id+'" style="background-image: url('+t.prevUrl+')"></div>'}),n+="</ul>",n+="</li>",i+="</div>"}),n+='<li>\t\t\t\t\t<button type="button" data-fancybox data-src="#payment" class="btn films-menu__btn">Варианты оплаты</button>\t\t\t\t</li>\t\t\t\t<li>\t\t\t\t\t<button type="button" data-fancybox data-src="#shiping" class="btn films-menu__btn">Доставка заказа</button>\t\t\t\t</li>',t.$block.find(".films-menu").html(n),t.$block.find(".films-preview__colors-container").html(i),$(".films-menu__title-link").click(function(){$(".films-menu__title").removeClass("active"),$(this).parent().addClass("active")}),$("[data-popup-in]").click(function(){t.switch($(this).data("src"))}),$("[data-popup-close]").click(function(){t.close()}),t.generated=!0}}]),t}();$(document).ready(function(){$(".section__list-item").click(function(){var t=$(this).parents(".section");t.children(".section__bg").remove(),t.prepend('<div class="section__bg" style="background-image: url('+$(this).data("bg")+')"></div>')});var t=new Popup;$("[data-popup]").click(function(){t.open($(this).data("src"))})});