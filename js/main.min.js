"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function removeSelect(){document.querySelector(".film-list-select").removeChild(this.parentElement)}function addSelect(){document.querySelectorAll(".form-popup__select-add").forEach(function(e,t){e.removeEventListener("click",addSelect),e.classList.remove("form-popup__select-add"),e.classList.add("form-popup__select-remove"),e.innerHTML="–",e.title="Удалить наименование",e.addEventListener("click",removeSelect)});var n="";type.forEach(function(e,t){n+='<optgroup label="'+e.id+'">',e.sub.forEach(function(e,t){n+="<option value=”"+e.id+"”>"+e.name+"</option>"}),n+="</optgroup>"});var e=document.createElement("div"),t=document.createElement("select"),i=document.createElement("input"),o=document.createElement("button");e.className="form-popup__select-item",t.name="",t.className="form-popup__select",t.innerHTML=n,i.className="input form-popup__select-input",i.name="",i.type="number",i.placeholder="Размер, м",o.type="button",o.className="btn form-popup__select-add",o.innerHTML="+",o.title="Добавить наименование",o.addEventListener("click",addSelect),e.appendChild(t),e.appendChild(i),e.appendChild(o),document.querySelector(".film-list-select").appendChild(e)}var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s){window.anchor={settings:{transitionDuration:2e3,transitionTimingFunction:"swing",labels:{error:"Couldn't find any section"}},init:function(e){return s(this).data("settings",s.extend(anchor.settings,e)),this.each(function(){var t=s(this);t.unbind("click").click(function(e){e.preventDefault(),anchor.jumpTo(anchor.getTopOffsetPosition(t),t.data("settings"))})})},getTopOffsetPosition:function(e){var t=e.attr("href"),n=s(s(t).get(0)),i=s(document).height(),o=s(window).height();if(!n||n.length<1)throw new ReferenceError(anchor.settings.labels.error);return n.offset().top+o>i?i-o:n.offset().top},jumpTo:function(e,t){var n=s("html, body");n.animate({scrollTop:e-50},t.transitionDuration,t.transitionTimingFunction),n.bind("scroll mousedown DOMMouseScroll mousewheel keyup",function(e){(0<e.which||"mousedown"===e.type||"mousewheel"===e.type)&&n.stop().unbind("scroll mousedown DOMMouseScroll mousewheel keyup")})}},s.fn.anchor=function(e){return anchor[e]?anchor[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==(void 0===e?"undefined":_typeof(e))&&e?s.error("Method "+e+" does not exist on jQuery.anchor"):anchor.init.apply(this,arguments)}}(jQuery);var Popup=function(){function e(){_classCallCheck(this,e),this.$block=$(".popup"),this.generated=!1}return _createClass(e,[{key:"open",value:function(e){this.generated||this.generate(),this.switch(e),document.body.classList.add("fancybox-active"),this.$block.fadeIn(),this.$block.addClass("active")}},{key:"close",value:function(){this.$block.fadeOut(),this.$block.removeClass("active"),document.body.classList.remove("fancybox-active")}},{key:"switch",value:function(e){$(".films-menu__title").removeClass("active"),$(".films-menu__subtitle").removeClass("active"),$(".films-preview__color").removeClass("active"),$(".films-preview__colors-list").removeClass("active"),$('.films-menu__subtitle[data-src="'+e+'"]').addClass("active").parents(".films-menu__title").addClass("active"),$('.films-preview__color[data-src="'+e+'"]').addClass("active").parent().addClass("active")}},{key:"generate",value:function(){var n="",i="",e=this;type.forEach(function(e,t){n+='<li class="films-menu__title">\n',n+='<span class="films-menu__title-link">'+e.name+"</span>",n+='<ul class="films-menu__subtitle-block">',i+='<div class="films-preview__colors-list">',e.sub.forEach(function(e,t){n+='<li class="films-menu__subtitle" data-popup-in data-src="'+e.id+'">'+e.name+"</li>",i+='<div class="films-preview__color" data-popup-in data-src="'+e.id+'"><img src="'+e.prevUrl+'" alt="'+e.name+'"></div>'}),n+="</ul>",n+="</li>",i+="</div>"}),n+='<li>\t\t\t\t\t<button type="button" data-fancybox data-src="#payment" class="btn films-menu__btn">Варианты оплаты</button>\t\t\t\t</li>\t\t\t\t<li>\t\t\t\t\t<button type="button" data-fancybox data-src="#shiping" class="btn films-menu__btn">Доставка заказа</button>\t\t\t\t</li>',e.$block.find(".films-menu").html(n),e.$block.find(".films-preview__colors-container").html(i),$(".films-menu__title-link").click(function(){$(".films-menu__title").removeClass("active"),$(this).parent().addClass("active")}),$("[data-popup-in]").click(function(){e.switch($(this).data("src"))}),$("[data-popup-close]").click(function(){e.close()}),e.generated=!0}}]),e}();$(document).ready(function(){$(".section__list-item").click(function(){var e=$(this).parents(".section");e.children(".section__bg").remove(),e.prepend('<div class="section__bg" style="background-image: url('+$(this).data("bg")+')"></div>')});var e=new Popup;$("[data-popup]").click(function(){e.open($(this).data("src"))}),$(".section__list-item").hover(function(){var e=$(this).parents(".section");e.children(".section__bg").remove(),e.prepend('<div class="section__bg" style="background-image: url('+$(this).data("bg")+')"></div>')},function(){$(this).parents(".section").children(".section__bg").remove()}),addSelect()});